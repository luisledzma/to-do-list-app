import { forwardRef, useImperativeHandle, useState } from "react";
import Utilities from "../../../Common/Utilities";
import { ApiPaths } from "../../../Models/Enum";

const SideBarApi = forwardRef(
  ({ onPageDataLoaded }: any, ref: any): JSX.Element => {
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // useState, useRef, useContext, etc.
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    const [isBusy, setIsBusy] = useState<boolean>(false);

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // useEffect
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Misc Methods
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    const getLists = async (): Promise<any> => {
      const result = await Utilities.GET(ApiPaths.GetList);
      return result;
    };
    ///////////////////////////////////////////////////////////////////////////////
    // Imperative Handle for accessing the child methods from parent using ref
    ///////////////////////////////////////////////////////////////////
    useImperativeHandle(ref, () => ({
      async loadPageData(): Promise<any> {
        setIsBusy(true);
        return Promise.all([getLists()])
          .then((results) => {
            return results;
          })
          .finally(() => setIsBusy(false));
      },
    }));

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Component's render method
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    return <div></div>;
  }
);

export default SideBarApi;
